  <link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/iron-label/iron-label.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">


<dom-module id="ui-gen">
  <template>
  <style is="custom-style">

	  paper-button.light-blue {
		background-color: #1E88E5;
		color: white;
	  }
	  	  

	  paper-button.custom:hover {
		  background-color: var(--paper-indigo-100);
	  }

	  iron-label{
		background-color: #2ecc71;
		color: white;
		border-radius: 25%;
		padding: 3%; 
		float: left;
		margin-right: 5%;
	  }
  		.state{
			border-style: solid;			
			border-color: #EF9A9A;
			width: 10%;
			margin-left: 20%;
			border-radius: 25%;
			text-align: center;
			padding: 2%;
		}
	  
      paper-header-panel {
        float: left;
        width: 20%;
        height: 300px;
        margin-left: 35%;
        @apply(--shadow-elevation-2dp);
      }
	  .paper-header-panel-outputs {
        height: 200px;
        margin-top: 20px;
        @apply(--shadow-elevation-2dp);
      }
      .paper-header {
        height: 80px;
        font-size: 26px;
        line-height: 60px;
        padding: 0 10px;
        color: white;
      }
	  
      .content {
        height: 300px;
      }
	  .outputscontent {
        height: 200px;
      }
      .cover {
        margin: 60px;
      }

      .green .paper-header {
        background-color: var(--paper-green-500);
      }

      .pink .paper-header {
        background-color: var(--paper-pink-a200);
      }
		ul
		{
			list-style-type: none;
		}
		
		li {
			margin-bottom: 10%;
			
		}
		

	  
      <!---.green .content {
        background: linear-gradient(white, #c8e6c9);
      }
	  
	  
	  .pink .outputscontent {
        background: linear-gradient(white, #F48FB1);
      }--->



  </style>
        <div class="content">
			<section>
			<iron-ajax
				auto
				url="status.json"
				params='{"alt":"json", "q":"chrome"}'
				handle-as="json"
				last-response="{{lastResponse}}"
				on-response="handleResponse"
				debounce-duration="300">
			</iron-ajax>
			  <paper-header-panel mode="waterfall" class="green">
				<div class="paper-header">Commands</div>
				<div class="content">
						<template is="dom-repeat" items="{{descriptors.commands}}">
						<ul>
							<li><paper-button  class="custom light-blue">{{item.label}}</paper-button> </li>
						</ul>
						</template>
				</div>
			  </paper-header-panel>
			  
			  <paper-header-panel mode="waterfall-tall" class="pink paper-header-panel-outputs">
				<div class="paper-header">Outputs</div>

				<div>
					<template is="dom-repeat" items="{{descriptors.outputs}}" >
						<ul>
							<li><iron-label>{{item.label}}</iron-label> <p  class="state"> {{item.value}} </p> </li>	
						</ul>
					</template>
				</div>
			  </paper-header-panel>
			</section>
        </div>
	</template>
</dom-module>

<script>

    (function() {
		'usestrict';Polymer({
		is: "ui-gen",
		ready: function() {
			var descriptors = {
			"commands": [{
				"name": "turnLightOn",
				"label": "Turn light on"
			},
			{
				"name": "turnLightOff",
				"label": "Turn light off"
			},
			{
				"name": "turnAcOff",
				"label": "Turn ac off"
			},
			{
				"name": "ac21",
				"label": "Set AC to 21 degrees"
			},
			{
				"name": "ac28",
				"label": "Set AC to 28 degrees"
			}],
			"outputs": [{
				"name": "light",
				"label": "Light",
				"value": ""
			},
			{
				"name": "ac",
				"label": "AC",
				"value": ""
			}]
			}
			this.descriptors = descriptors;
		},
		handleResponse: function (data) {
            var status = data.detail.response.status;
			for (var i = 0; i < this.descriptors.outputs.length; i++) {
				this.set('descriptors.outputs.' + i + '.value', eval("status." + this.descriptors.outputs[i].name));
			}			
        }
	});
	})();
</script>